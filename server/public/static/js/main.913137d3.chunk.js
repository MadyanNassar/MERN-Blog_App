(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{28:function(e,t,n){},38:function(e,t,n){},44:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(20),s=n.n(r),i=n(3),l=n(2),o=n(7),j=n.p+"static/media/icon.3a349804.png",b=(n(28),n(0)),d=function(){var e=Object(l.f)(),t=localStorage.getItem("admin")||null,n=Object(a.useState)(t),c=Object(i.a)(n,2),r=c[0],s=c[1];return Object(b.jsxs)("nav",{children:[Object(b.jsx)(o.c,{exact:!0,to:"/",children:Object(b.jsxs)("div",{className:"nav-logo",children:[Object(b.jsx)("img",{src:j,className:"nav-icon",alt:"blog icon"}),Object(b.jsx)("h1",{className:"title",children:"Blogger"})]})}),Object(b.jsxs)("div",{className:"nav-links",children:[Object(b.jsx)(o.c,{exact:!0,to:"/",className:"nav-link",children:Object(b.jsx)("span",{children:"Home"})}),Object(b.jsx)(o.c,{exact:!0,to:"/favorite_blogs",className:"nav-link",children:Object(b.jsx)("span",{children:"Favorite Blogs"})}),Object(b.jsx)(o.c,{exact:!0,to:"/add_blog",className:"nav-link",children:Object(b.jsx)("span",{children:"New Blog"})}),r?Object(b.jsx)("span",{className:"admin",onClick:function(){window.alert("You are admin ... you can delete any blog you want, soon you can also edit any blog")},children:"Admin \u2714\ufe0f"}):Object(b.jsx)("span",{className:"nav-link",onClick:function(t){!function(){var t=window.prompt("Enter the Admin secret key");"LetMeBecomeAdmin1234"===t?(localStorage.setItem("admin",!0),s(!0),window.alert("Congratulations You are now Admin"),e.go(0)):window.alert("".concat(t," is not a secret key ... please try again"))}()},children:"Make me Admin"})]})]})},u=(n(38),n(18)),g=function(){return Object(b.jsxs)("div",{className:"footer",children:[Object(b.jsx)("p",{className:"copyrights",children:"\xa9 2021 copyrights"}),Object(b.jsx)("p",{className:"me",children:"Written By Madyan Nassar"}),Object(b.jsxs)("div",{className:"social",children:[Object(b.jsx)(u.SocialIcon,{className:"github-icon",url:"https://github.com/MadyanNassar"}),Object(b.jsx)(u.SocialIcon,{url:"https://www.linkedin.com/in/madyan-nassar/"})]})]})},h=n(19),O=(n(44),function(e){var t=e.blogs,n=JSON.parse(localStorage.getItem("blogs"))||[],c=Object(a.useState)(n),r=Object(i.a)(c,2),s=r[0],l=r[1];return Object(b.jsxs)("div",{className:"blogs-list-main",children:[Object(b.jsx)("h1",{className:"blog-list-title",children:"BLOG LIST"}),t.length>0?Object(b.jsx)(b.Fragment,{children:t.map((function(e){return Object(b.jsxs)("div",{className:"blogs-preview",children:[Object(b.jsx)(o.b,{to:"/blogs/".concat(e._id),children:Object(b.jsxs)("div",{className:"blogs-list",children:[Object(b.jsxs)("div",{className:"blogs-list-details",children:[Object(b.jsx)("h1",{children:e.title}),Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:e.shortDescription}),Object(b.jsxs)("p",{children:["Category: ",e.category[0].name]})]}),Object(b.jsxs)("p",{children:["Written By: ",e.author[0].name]})]}),Object(b.jsx)("img",{className:"banner-image",src:e.cardBanner[0].filePath,alt:"Blog Banner"})]})}),Object(b.jsx)("span",{title:n.some((function(t){return t._id===e._id}))?" this Blog is in your Favorite List":"Press to Add this Blog to your Favorite List",blog:JSON.stringify(e),onClick:function(e){!function(e){var t=JSON.parse(e.currentTarget.getAttribute("blog")),a=n.some((function(e){return e._id===t._id})),c=n.filter((function(e){return e._id!==t._id}));a?(l(c),localStorage.setItem("blogs",JSON.stringify(c)),e.target.className="not-fav-button",e.currentTarget.title="Press to Add to your Favorite List"):(l([t].concat(Object(h.a)(s))),localStorage.setItem("blogs",JSON.stringify([t].concat(Object(h.a)(s)))),e.target.className="fav-button",e.currentTarget.title="Blog in your Favorite List")}(e)},className:n.some((function(t){return t._id===e._id}))?"fav-button":"not-fav-button",children:"\u2665"})]},e._id)}))}):Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("h2",{className:"no-blogs",children:"No blogs Found ... !"})})]})}),x=n(4),m=n.n(x),p=n(8),f=function(e){var t=Object(a.useState)(null),n=Object(i.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(!0),l=Object(i.a)(s,2),o=l[0],j=l[1],b=Object(a.useState)(!1),d=Object(i.a)(b,2),u=d[0],g=d[1],h=function(){var t=Object(p.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e);case 3:if((n=t.sent).ok){t.next=6;break}throw Error("Sorry ... Can't get the data ...");case 6:return t.next=8,n.json();case 8:a=t.sent,j(!1),r(a),g(!1),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),g(t.t0.message),j(!1);case 18:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){h()}),[e]),{data:c,isPending:o,error:u}},v=n.p+"static/media/loading.c7d9f081.gif",N=n.p+"static/media/blogs-banner.834b7ed5.jpg",y=(n(46),function(){var e=f("/api/blog"),t=e.error,n=e.isPending,a=e.data;return Object(b.jsxs)("div",{children:[Object(b.jsx)("img",{className:"banner-logo",src:N,alt:"banner"}),Object(b.jsxs)("div",{className:"home",children:[t&&Object(b.jsx)("div",{children:t}),n&&Object(b.jsx)("img",{src:v,className:"loading-img",alt:"loading"}),a&&Object(b.jsx)(O,{blogs:a})]})]})}),S=function(){var e=Object(p.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/".concat(n,"/").concat(t),{method:"DELETE"});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=(n(47),function(){var e=localStorage.getItem("admin")||!1,t=Object(l.g)().id,n="/api/blog/".concat(t),a=f(n),c=a.data,r=a.isPending,s=a.error,i=Object(l.f)(),o=function(){var n=Object(p.a)(m.a.mark((function n(a){var r,s,l,o;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=6;break}window.alert("Sorry, You can't delete blogs .. please tab on Make me Admin and enter the secret key to be able to delete blogs"),a.target.style="background-color: gray; cursor: not-allowed",a.target.disabled=!0,n.next=17;break;case 6:return r=c.blog.banner[0]._id,s=c.blog.cardBanner[0]._id,l=JSON.parse(localStorage.getItem("blogs"))||[],o=l.filter((function(e){return e._id!==c.blog._id})),localStorage.setItem("blogs",JSON.stringify(o)),n.next=13,S(r,"file");case 13:return n.next=15,S(s,"file");case 15:return n.next=17,S(t,"blog").then((function(){i.push("/")}));case 17:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"blog-details",children:[r&&Object(b.jsx)("img",{src:v,className:"loading-img",alt:"loading"}),s&&Object(b.jsx)("div",{children:s}),c&&Object(b.jsxs)("article",{children:[Object(b.jsx)("h1",{children:c.blog.title}),Object(b.jsxs)("h2",{children:["- ",c.blog.shortDescription]}),Object(b.jsx)("img",{className:"banner-image",src:c.blog.banner[0].filePath,alt:"Blog Banner"}),Object(b.jsx)("h3",{children:c.blog.description}),Object(b.jsxs)("p",{children:[" Category : ",c.blog.category[0].name]}),Object(b.jsxs)("div",{className:"author",children:[Object(b.jsxs)("p",{className:"author-name",children:["Written By : ",c.blog.author[0].name]}),Object(b.jsx)("img",{className:"author-image",src:c.blog.author[0].avatar[0].filePath,alt:"Blog Banner"})]}),Object(b.jsx)("button",{onClick:function(e){return o(e)},children:"Delete this Blog"})]})]})}),k=n(23),B=function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("file",t),e.prev=2,e.next=5,fetch("/api/file/",{method:"POST",body:a});case 5:if((c=e.sent).ok){e.next=8;break}throw new Error("Network Error ... Can't upload image");case 8:return e.next=10,c.json().then((function(e){return e.id}));case 10:n=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:return e.abrupt("return",{img:t,ID:n});case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}(),I=(n(48),function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(i.a)(r,2),o=s[0],j=s[1],d=Object(a.useState)(""),u=Object(i.a)(d,2),g=u[0],h=u[1],O=Object(a.useState)(""),x=Object(i.a)(O,2),f=x[0],v=x[1],N=Object(a.useState)([]),y=Object(i.a)(N,2),S=y[0],w=(y[1],Object(a.useState)([])),I=Object(i.a)(w,2),_=I[0],C=(I[1],Object(a.useState)("")),D=Object(i.a)(C,2),A=D[0],F=D[1],J=Object(a.useState)(null),P=Object(i.a)(J,2),T=P[0],L=P[1],E=Object(a.useState)(null),q=Object(i.a)(E,2),M=q[0],W=q[1],Y=Object(a.useState)(null),G=Object(i.a)(Y,2),H=G[0],R=G[1],V=Object(l.f)(),z={title:n,description:o,shortDescription:g,name:A,categoryName:f,banner:S,cardBanner:_},K=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,B(T,"");case 3:return n=e.sent,e.next=6,B(M,"");case 6:return a=e.sent,e.next=9,B(H,"");case 9:return c=e.sent,e.next=12,fetch("/api/blog/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(k.a)({bannerID:n.ID,cardID:a.ID,avatarID:c.ID,categoryName:f},z))}).then((function(){V.push("/")}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{className:"create-blog",children:Object(b.jsxs)("form",{onSubmit:K,children:[Object(b.jsx)("label",{children:"Blog Title:"}),Object(b.jsx)("input",{type:"text",placeholder:"title ...",required:!0,value:n,onChange:function(e){return c(e.target.value)}}),Object(b.jsx)("label",{children:"Blog Short Description:"}),Object(b.jsx)("input",{type:"text",placeholder:"short Description ...",required:!0,value:g,onChange:function(e){return h(e.target.value)}}),Object(b.jsx)("label",{children:"Description:"}),Object(b.jsx)("textarea",{rows:"7",type:"text",placeholder:"description ...",required:!0,value:o,onChange:function(e){return j(e.target.value)}}),Object(b.jsx)("label",{children:"Banner Image:"}),Object(b.jsx)("input",{type:"file",required:!0,accept:"image/png, image/jpg, image/jpeg",className:"upload-btn",onChange:function(e){L(e.target.files[0])}}),Object(b.jsx)("label",{children:"Card Image:"}),Object(b.jsx)("input",{type:"file",required:!0,accept:"image/png, image/jpg, image/jpeg",className:"upload-btn",onChange:function(e){W(e.target.files[0])}}),Object(b.jsx)("hr",{}),Object(b.jsx)("label",{children:"category:"}),Object(b.jsx)("input",{type:"text",placeholder:"category ...",required:!0,value:f,onChange:function(e){return v(e.target.value)}}),Object(b.jsx)("hr",{}),Object(b.jsx)("label",{children:"Author:"}),Object(b.jsx)("input",{type:"text",placeholder:"author ...",required:!0,value:A,onChange:function(e){return F(e.target.value)}}),Object(b.jsx)("input",{type:"file",accept:"image/png, image/jpg, image/jpeg",required:!0,className:"upload-btn",onChange:function(e){return R(e.target.files[0])}}),Object(b.jsx)("button",{children:"Add Blog"})]})})}),_=function(){var e=JSON.parse(localStorage.getItem("blogs"))||[],t=Object(a.useState)(e),n=Object(i.a)(t,2),c=n[0],r=n[1];return Object(b.jsx)("div",{className:"home",children:Object(b.jsxs)("div",{className:"blogs-list-main",children:[Object(b.jsx)("h1",{className:"blog-list-title",children:"FAVORITE BLOG LIST"}),c.length>0?Object(b.jsx)(b.Fragment,{children:c.map((function(e){return Object(b.jsxs)("div",{className:"blogs-preview",children:[Object(b.jsx)(o.b,{to:"/blogs/".concat(e._id),children:Object(b.jsxs)("div",{className:"blogs-list",children:[Object(b.jsxs)("div",{className:"blogs-list-details",children:[Object(b.jsx)("h1",{children:e.title}),Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:e.shortDescription}),Object(b.jsxs)("p",{children:["Category: ",e.category[0].name]})]}),Object(b.jsxs)("p",{children:["Written By: ",e.author[0].name]})]}),Object(b.jsx)("img",{className:"banner-image",src:e.cardBanner[0].filePath,alt:"Blog Banner"})]})}),Object(b.jsx)("span",{title:"remove this Blog from your Favorite List",blog:JSON.stringify(e),onClick:function(e){!function(e){var t=JSON.parse(e.currentTarget.getAttribute("blog")),n=c.filter((function(e){return e._id!==t._id}));localStorage.setItem("blogs",JSON.stringify(n)),r(n)}(e)},className:"fav-button",children:"\u2665"})]},e._id)}))}):Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("h2",{className:"no-blogs",children:"No favorite blogs Found ... !"})})]})})},C=(n(49),function(){return Object(b.jsxs)("div",{className:"not-found",children:[Object(b.jsx)("h1",{children:"404"}),Object(b.jsx)("p",{children:"Not found or Page doesn't exist"})]})});n(50);var D=function(){return Object(b.jsx)(o.a,{children:Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(d,{}),Object(b.jsx)("div",{className:"body-content",children:Object(b.jsxs)(l.c,{children:[Object(b.jsx)(l.a,{exact:!0,path:"/",children:Object(b.jsx)(y,{})}),Object(b.jsx)(l.a,{exact:!0,path:"/add_blog",children:Object(b.jsx)(I,{})}),Object(b.jsx)(l.a,{exact:!0,path:"/favorite_blogs",children:Object(b.jsx)(_,{})}),Object(b.jsx)(l.a,{exact:!0,path:"/blogs/:id",children:Object(b.jsx)(w,{})}),Object(b.jsx)(l.a,{path:"/*",children:Object(b.jsx)(C,{})})]})}),Object(b.jsx)(g,{})]})})};s.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(D,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.913137d3.chunk.js.map